# Map the virtual sensors from |heatpump_*| to human-readable values
- sensor:
  #
  # 6.1 Main operational data
  #
  - unique_id: heatpump_outside_temp
    name: Aussentemperatur Wärmepumpe
    device_class: temperature
    unit_of_measurement: °C
    state: >
      {{ int(states('sensor.heatpump_analog')) / 10 }}
    availability: >
      {{ has_value('sensor.heatpump_analog') }}
  - unique_id: heatpump_return_temp
    name: Rücklauftemperatur Wärmepumpe
    device_class: temperature
    unit_of_measurement: °C
    state: >
      {{ int(states('sensor.heatpump_analog_1')) / 10 }}
    availability: >
      {{ has_value('sensor.heatpump_analog_1') }}
  - unique_id: heatpump_warm_water_temp
    name: Warmwassertemperatur Wärmepumpe
    device_class: temperature
    unit_of_measurement: °C
    state: >
      {{ int(states('sensor.heatpump_analog_2')) / 10 }}
    availability: >
      {{ has_value('sensor.heatpump_analog_2') }}
  - unique_id: heatpump_outgoing_temp
    name: Vorlauftemperatur Wärmepumpe
    device_class: temperature
    unit_of_measurement: °C
    state: >
      {{ int(states('sensor.heatpump_analog_4')) / 10 }}
    availability: >
      {{ has_value('sensor.heatpump_analog_4') }}
  - unique_id: heatpump_source_output_temp
    name: Wärmequellenaustritt Wärmepumpe
    device_class: temperature
    unit_of_measurement: °C
    state: >
      {{ int(states('sensor.heatpump_analog_6')) / 10 }}
    availability: >
      {{ has_value('sensor.heatpump_analog_6') }}
  - unique_id: heatpump_circuit_2_temp
    name: Temperatur 2. Heizkreis Wärmepumpe
    device_class: temperature
    unit_of_measurement: °C
    state: >
      {{ int(states('sensor.heatpump_analog_8')) / 10 }}
    availability: >
      {{ has_value('sensor.heatpump_analog_8') }}
  - unique_id: heatpump_circuit_3_temp
    name: Temperatur 3. Heizkreis Wärmepumpe
    device_class: temperature
    unit_of_measurement: °C
    state: >
      {{ int(states('sensor.heatpump_analog_9')) / 10 }}
    availability: >
      {{ has_value('sensor.heatpump_analog_9') }}
  - unique_id: heatpump_room_1_temp
    name: Raumtemperatur 1 Wärmepumpe
    device_class: temperature
    unit_of_measurement: °C
    state: >
      {{ int(states('sensor.heatpump_analog_10')) / 10 }}
    availability: >
      {{ has_value('sensor.heatpump_analog_10') }}
  - unique_id: heatpump_room_2_temp
    name: Raumtemperatur 2 Wärmepumpe
    device_class: temperature
    unit_of_measurement: °C
    state: >
      {{ int(states('sensor.heatpump_analog_11')) / 10 }}
    availability: >
      {{ has_value('sensor.heatpump_analog_11') }}
  - unique_id: heatpump_room_1_humidity
    name: Raumfeuchte 1 Wärmepumpe
    device_class: humidity
    unit_of_measurement: "%"
    state: >
      {{ int(states('sensor.heatpump_analog_12')) / 10 }}
    availability: >
      {{ has_value('sensor.heatpump_analog_12') }}
  - unique_id: heatpump_room_2_humidity
    name: Raumfeuchte 2 Wärmepumpe
    device_class: humidity
    unit_of_measurement: "%"
    state: >
      {{ int(states('sensor.heatpump_analog_13')) / 10 }}
    availability: >
      {{ has_value('sensor.heatpump_analog_13') }}
  - unique_id: heatpump_return_target_temp
    name: Rücklaufsolltemperatur Wärmepumpe
    device_class: temperature
    unit_of_measurement: °C
    state: >
      {{ int(states('sensor.heatpump_analog_52')) / 10 }}
    availability: >
      {{ has_value('sensor.heatpump_analog_52') }}
  - unique_id: heatpump_circuit_2_water_target_temp
    name: Solltemperatur 2. Heizkreis Wärmepumpe
    device_class: temperature
    unit_of_measurement: °C
    state: >
      {{ int(states('sensor.heatpump_analog_53')) / 10 }}
    availability: >
      {{ has_value('sensor.heatpump_analog_53') }}
  - unique_id: heatpump_circuit_3_water_target_temp
    name: Solltemperatur 3. Heizkreis Wärmepumpe
    device_class: temperature
    unit_of_measurement: °C
    state: >
      {{ int(states('sensor.heatpump_analog_54')) / 10 }}
    availability: >
      {{ has_value('sensor.heatpump_analog_54') }}
  # 6.1: Main operational data - cooling
  - unique_id: heatpump_cooling_outgoing_temp
    name: Passiv Kühlen Vorlauftemperatur Wärmepumpe
    device_class: temperature
    unit_of_measurement: °C
    state: >
      {{ int(states('sensor.heatpump_analog_18')) / 10 }}
    availability: >
      {{ has_value('sensor.heatpump_analog_18') }}
  - unique_id: heatpump_cooling_incoming_temp
    name: Passiv Kühlen Rücklauftemperatur Wärmepumpe
    device_class: temperature
    unit_of_measurement: °C
    state: >
      {{ int(states('sensor.heatpump_analog_19')) / 10 }}
    availability: >
      {{ has_value('sensor.heatpump_analog_19') }}
  - unique_id: heatpump_cooling_incoming_secondary_temp
    name: Passiv/Aktiv Kühlen Rücklauftemperatur gem. Primärkreis Wärmepumpe
    device_class: temperature
    unit_of_measurement: °C
    state: >
      {{ int(states('sensor.heatpump_analog_20')) / 10 }}
    availability: >
      {{ has_value('sensor.heatpump_analog_20') }}
  # 6.1: Main operational data - solar
  - unique_id: heatpump_solar_panel_sensor
    name: Kollektorfühler Wärmepumpe
    device_class: temperature
    unit_of_measurement: °C
    state: >
      {{ int(states('sensor.heatpump_analog_9')) / 10 }}
    availability: >
      {{ has_value('sensor.heatpump_analog_9') }}
  - unique_id: heatpump_solar_storage
    name: Solarspeicher Wärmepumpe
    device_class: temperature
    unit_of_measurement: °C
    state: >
      {{ int(states('sensor.heatpump_analog_22')) / 10 }}
    availability: >
      {{ has_value('sensor.heatpump_analog_22') }}
  # 6.1: Main operational data - ventilation
  - unique_id: heatpump_vent_outdoor_air_temp
    name: Aussenlufttemperatur Wärmepumpe
    device_class: temperature
    unit_of_measurement: °C
    state: >
      {{ int(states('sensor.heatpump_analog_119')) / 10 }}
    availability: >
      {{ has_value('sensor.heatpump_analog_119') }}
  - unique_id: heatpump_vent_supply_air_temp
    name: Zulufttemperatur Wärmepumpe
    device_class: temperature
    unit_of_measurement: °C
    state: >
      {{ int(states('sensor.heatpump_analog_120')) / 10 }}
    availability: >
      {{ has_value('sensor.heatpump_analog_120') }}
  - unique_id: heatpump_vent_exit_air_temp
    name: Ablufttemperatur Wärmepumpe
    device_class: temperature
    unit_of_measurement: °C
    state: >
      {{ int(states('sensor.heatpump_analog_121')) / 10 }}
    availability: >
      {{ has_value('sensor.heatpump_analog_121') }}
  - unique_id: heatpump_vent_extraction_air_temp
    name: Fortlufttemperatur Wärmepumpe
    device_class: temperature
    unit_of_measurement: °C
    state: >
      {{ int(states('sensor.heatpump_analog_122')) / 10 }}
    availability: >
      {{ has_value('sensor.heatpump_analog_122') }}
  # ModbusTCP / pymodbus only support reading up to 123 registers
  # per request, so we can't get values for these unless we
  # start reading heatpump_analog in two requests.
  # 
  # - unique_id: heatpump_vent_supply_fan_rpm
  #   # Drehzal Zuluftventilator Wärmepumpe
  #   device_class: speed
  #   unit_of_measurement: rpm
  #   state: >
  #     {{ int(states('sensor.heatpump_analog_124')) / 10 }}
  #   availability: >
  #     {{ has_value('sensor.heatpump_analog_124') }}
  # - unique_id: heatpump_vent_exhaust_fan_rpm
  #   # Drehzahl Abluftventilator Wärmepumpe
  #   device_class: speed
  #   unit_of_measurement: rpm
  #   state: >
  #     {{ int(states('sensor.heatpump_analog_125')) / 10 }}
  #   availability: >
  #      {{ has_value('sensor.heatpump_analog_125') }}

  #
  # 6.2 History
  #
  - unique_id: heatpump_compressor_1_hours
    name: Verdichter 1 Betriebsstunden Wärmepumpe
    unit_of_measurement: h
    state: >
      {{ int(states('sensor.heatpump_analog_71')) }}
    availability: >
      {{ has_value('sensor.heatpump_analog_71') }}
  - unique_id: heatpump_compressor_2_hours
    name: Verdichter 2 Betriebsstunden Wärmepumpe
    unit_of_measurement: h
    state: >
      {{ int(states('sensor.heatpump_analog_72')) }}
    availability: >
      {{ has_value('sensor.heatpump_analog_72') }}
  - unique_id: heatpump_primary_pump_hours
    name: Primärpumpe Betriebsstunden Wärmepumpe
    unit_of_measurement: h
    state: >
      {{ int(states('sensor.heatpump_analog_73')) }}
    availability: >
      {{ has_value('sensor.heatpump_analog_73') }}
  - unique_id: heatpump_secondary_heater_hours
    name: 2. Wärmeerzeuger Betriebsstunden Wärmepumpe
    unit_of_measurement: h
    state: >
      {{ int(states('sensor.heatpump_analog_74')) }}
    availability: >
      {{ has_value('sensor.heatpump_analog_74') }}
  - unique_id: heatpump_heating_pump_hours
    name: Heizungspumpe Betriebsstunden Wärmepumpe
    unit_of_measurement: h
    state: >
      {{ int(states('sensor.heatpump_analog_75')) }}
    availability: >
      {{ has_value('sensor.heatpump_analog_75') }}
  - unique_id: heatpump_warm_water_pump_hours
    name: Warmwasserpumpe Betriebsstunden Wärmepumpe
    unit_of_measurement: h
    state: >
      {{ int(states('sensor.heatpump_analog_76')) }}
    availability: >
      {{ has_value('sensor.heatpump_analog_76') }}
  - unique_id: heatpump_immersion_heater_hours
    name: Flanschheizung Betriebsstunden Wärmepumpe
    unit_of_measurement: h
    state: >
      {{ int(states('sensor.heatpump_analog_77')) }}
    availability: >
      {{ has_value('sensor.heatpump_analog_77') }}
  - unique_id: heatpump_pool_pump_hours
    name: Schwimmbadpumpe Betriebsstunden Wärmepumpe
    unit_of_measurement: h
    state: >
      {{ int(states('sensor.heatpump_analog_78')) }}
    availability: >
      {{ has_value('sensor.heatpump_analog_78') }}
  - unique_id: heatpump_addl_circulation_pump_hours
    name: Zusatzumwälzpumpe Betriebsstunden Wärmepumpe
    unit_of_measurement: h
    state: >
      {{ int(states('sensor.heatpump_analog_70')) }}
    availability: >
      {{ has_value('sensor.heatpump_analog_70') }}

